"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var appModule=angular.module("material-analytics",["ui.router","material-analytics-ecommerce"]).run(["$window","$rootScope","$location","analyticsConfig",function(a,e,t,n){a.test=1,a.dataLayer=a.dataLayer||[],e.$on("$stateChangeSuccess",function(e,r,o){var i=t.path();a.dataLayer.push({event:"virtualPageView",virtualPage:i,virtualTitle:r.name,tenantID:n.getTenantId()})})}]),_createClass=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),AnalyticsConfigProvider=function(){function a(){_classCallCheck(this,a),this.tenantId=""}return _createClass(a,[{key:"setTenantId",value:function(a){this.tenantId=a}},{key:"$get",value:function(){var a=this;return{getTenantId:function(){return a.tenantId}}}}]),a}();angular.module("material-analytics").provider("analyticsConfig",AnalyticsConfigProvider),angular.module("material-analytics-ecommerce",["ngLodash"]).run(["$rootScope","$window","maProductImpressions",function(a,e,t){e.dataLayer=e.dataLayer||[],e.ga&&e.ga("require","ec"),a.$on("ProductListLoaded",function(a,e,n){t.send(e,n)})}]),angular.module("material-analytics-ecommerce").factory("maProductPayload",function(){return{create:function(a,e,t,n){var r=a.id,o=a.name,i=a.price,c={name:o,id:r,price:i,category:e};return angular.isDefined(t)&&(c.list=t),angular.isNumber(n)&&(c.position=n),c}}}),angular.module("material-analytics-ecommerce").directive("maProductClickTracker",["$window","maProductPayload",function(a,e){return{restrict:"A",scope:{product:"=maProductClickTracker",productCategory:"@",productPosition:"@"},link:function(t,n){var r=function(){var n=void 0,r=void 0;angular.isDefined(t.productPosition)&&angular.isNumber(parseInt(t.productPosition))&&(r=parseInt(t.productPosition));var o=e.create(t.product,t.productCategory,n,r);a.dataLayer.push({ecommerce:{click:{products:[o]}}})};n.on("click",r),t.$on("$destroy",function(){n.off("click",r)})}}}]),angular.module("material-analytics-ecommerce").factory("maProductImpressions",["$window","lodash","maProductPayload",function(a,e,t){return{send:function(n){var r=arguments.length<=1||void 0===arguments[1]?"":arguments[1],o=e.map(n,function(a,e){var n=(a.name,a.id,a.price,"");return""!==r&&(n="Category"),t.create(a,r,n,e+1)});a.dataLayer.push({ecommerce:{impressions:o}})}}}]);